# !/usr/bin/env bash
# start

# Install-specific
export CLUSTERDB=/Users/swat/dev/cdb
export FLASK_ENV=development
export HOST=localhost
export PORT=5555
export SECRET_KEY='justTestingTheFlaskUserEncryption'
#source '/data/certs/authSecret'
# NOTE: The env var CLUSTERDB must point to the directory
#       just above the clusterDb directory before running this script.

# The install-specific configuration.
source $CLUSTERDB/clusterDbConfig.sh

# The Install-independent start-up.
# TODO build a real production server
export FLASK_APP=cluster
if [ $BACKGROUND ]; then
    nohup flask run -h $HOST -p $PORT --with-threads &> log &
else
    flask run -h $HOST -p $PORT --with-threads
fi
